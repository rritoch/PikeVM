<html><head><title>Pike Reference Manual - Msql.msql()-&gt;query()</title>
<link rel='stylesheet' href='../../../../style.css' /></head>
<body topmargin='0' leftmargin='0' marginheight='0' marginwidth='0'
      bgcolor='#ffffff' text='#000000' link='#000099' alink='#002040'
      vlink='#000099'>

<table width="100%">
  <tr>
    <td colspan='3'></td>
    <td colspan='2' align='right'>Extracted from Pike v7.8 release 116 at 2008-12-31.</td>
  </tr>
  <tr>
    <td width="0%"><img src="../../../..//images/unit.gif" alt="" width="10" height="1"></td>
    <td width="1%">
      <a href="http://pike.ida.liu.se/"><img src="../../../..//images/pike_logo.gif"
      border="0" alt="pike.ida.liu.se" width="181" height="41" hspace="5"></a></td>
    <td width="0%"><img src="../../../..//images/unit.gif" alt="" width="10" height="1"></td>
    <td width="99%">
      <table align="center" border="0" width="100%" cellspacing="0" cellpadding="0" valign="middle">
        <tr>
          <td width="1%" align="right"><img src="../../../..//images/pike_line_left.gif" alt="" border="0" width="5" height="11"></td>
          <td background="../../../..//images/pike_line_middle.gif" width="98%"><img src="../../../..//images/unit.gif" alt="" border="0" width="11" height="11"></td>
          <td width="1%" align="left"><img src="../../../..//images/pike_line_right.gif" alt="" border="0" width="5" height="11"></td>
        </tr>
      </table>
    </td>
    <td width="0%"><img src="../../../..//images/unit.gif" alt="" width="10" height="1"></td>
  </tr>
  <tr>
    <td colspan="5"><img src="../../../..//images/unit.gif" alt="" width="1" height="10"></td>
  </tr>
</table>

<table>
  <tr>
    <td width='180' valign='top' bgcolor='#f0f0f0'><a href='../../../../index.html'><b>[Top]</b></a><br />
<a href='../../../../ex/predef_3A_3A/Msql.html'><b>Msql</b></a><br />
<a href='../../../../ex/predef_3A_3A/Msql/msql.html'><b>Msql.msql</b></a><br />
<table border='0' cellpadding='1' cellspacing='0' class='sidebar'><tr><td nowrap='nowrap'><br /><b>Methods</b></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/affected_rows.html'>affected_rows()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/create.html'>create()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/create_db.html'>create_db()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/drop_db.html'>drop_db()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/error.html'>error()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/host_info.html'>host_info()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/list_dbs.html'>list_dbs()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/list_fields.html'>list_fields()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/list_index.html'>list_index()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/list_tables.html'>list_tables()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;query()</td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/reload_acl.html'>reload_acl()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/select_db.html'>select_db()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/server_info.html'>server_info()</a></td></tr>
<tr><td nowrap='nowrap'>&nbsp;<a href='../../../../ex/predef_3A_3A/Msql/msql/shutdown.html'>shutdown()</a></td></tr>
</table></td>
    <td width='520' valign='top'>

    <table border="0" width="520" bgcolor="#e0e0e0"
           cellpadding="0" cellspacing="4" class='sidebar'>
      <tr>
        <td valign="middle">
	  <a href="../../../../ex/predef_3A_3A/Msql/msql/list_tables.html"><img src="../../../../images/prev.gif" hspace="3"
	         border="0" alt="previous" >Msql.msql()-&gt;list_tables()</a>
          <br />
	</td>
	<td align="right" valign="middle">
	  <a href="../../../../ex/predef_3A_3A/Msql/msql/reload_acl.html">Msql.msql()-&gt;reload_acl()<img src="../../../../images/next.gif" hspace="3"
	          border="0" alt="next" ></a>
	  <br />
	</td>
      </tr>
    </table>

    <h1>Method Msql.msql()-&gt;query()</h1>
    

<hr clear='all' size='1' noshadow='noshadow' />
<dl>
<dt><font face='Helvetica'><font face='Helvetica'>Method</font>
<font size='+1'><b>query</b></font>
</font><dt>
<dd><p><tt><font color='#202020'>array</font>(<font color='#202020'>mapping</font>(<font color='#202020'>string</font>:<font color='#202020'>mixed</font>)) <b><font color='#000066'>query</font>(</b><font color='#202020'>string</font> <font color='#005080'>sqlquery</font><b>)</b></tt></p></dd>

<dt><font face='Helvetica'>Description</font><dt>
<dd><font face='Helvetica'><p>This is all you need to query the database. It takes as argument an SQL
 query string (i.e.: "SELECT foo,bar FROM baz WHERE name like '%kinkie%'"
 or "INSERT INTO baz VALUES ('kinkie','made','this')")
 and returns a data structure containing the returned values.
 The structure is an array (one entry for each returned row) of mappings
 which have the column name as index and the column contents as data.
 So to access a result from the first example you would have to do
 "results[0]-&gt;foo".</p>
<p> A query which returns no data results in an empty array (and NOT in a 0).
 Also notice that when there is a column name clash (that is: when you
 join two or more tables which have columns with the same name), the
 clashing columns are renamed to &lt;tablename&gt;+"."+&lt;column name&gt;.
 To access those you'll have to use the indexing operator '[]
 (i.e.: results[0]["foo.bar"]).</p>
</font></dd>
<dt><font face='Helvetica'>Throws</font><dt>
<dd><font face='Helvetica'><p>Errors (both from the interface and the SQL server) are reported via
 exceptions, and you definitely want to catch them. Error messages are
 not particularly verbose, since they account only for errors inside the
 driver. To get server-related error messages, you have to use the
 <font face='courier'><a href='../../../predef_3A_3A/Msql/msql/error.html'>error</a></font>  function.</p>
</font></dd>
<dt><font face='Helvetica'>Note</font><dt>
<dd><font face='Helvetica'><p>Note that if the query is NOT a of SELECT type, but UPDATE or
 MODIFY, the returned value is an empty array.
 <b>This is not an error</b>. Errors are reported <b>only</b> via exceptions.</p>
</font></dd>
<dt><font face='Helvetica'>See also</font><dt>
<dd><font face='Helvetica'><p><font face='courier'><a href='../../../predef_3A_3A/Msql/msql/error.html'>error</a></font> </p>
</font></dd></dl>


    <hr size='1' noshade='1' />
    </td>
  </tr>
</table>
</body>
</html>